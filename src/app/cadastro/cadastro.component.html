<app-header></app-header>

<section class="container mx-auto px-4 py-16">
  <div class="max-w-2xl mx-auto">
    <h1 class="text-4xl font-bold text-center text-gray-800 mb-6">Cadastro</h1>
    <p class="text-xl text-gray-600 text-center mb-12">
      Preencha os dados abaixo para criar sua conta
    </p>

    <div class="bg-pink-50 rounded-xl p-8 shadow-md">
      <form #formCadastro="ngForm" (ngSubmit)="onSubmit(formCadastro)" class="space-y-6">

        <!-- Nome -->
        <div>
          <label class="block text-gray-700 mb-1 font-medium">Nome</label>
          <input type="text" name="nome" [(ngModel)]="nome" required
                 class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-pink-400"
                 placeholder="Digite seu nome">
        </div>

        <!-- E-mail -->
        <div>
          <label class="block text-gray-700 mb-1 font-medium">E-mail</label>
          <input type="email" name="email" [(ngModel)]="email" required
                 class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-pink-400"
                 placeholder="exemplo@email.com">
        </div>

        <!-- Senha -->
        <div>
          <label class="block text-gray-700 mb-1 font-medium">Senha</label>
          <input type="password" name="senha" [(ngModel)]="senha" required minlength="6"
                 class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-pink-400"
                 placeholder="Digite sua senha">
        </div>

        <!-- Confirmar Senha -->
        <div>
          <label class="block text-gray-700 mb-1 font-medium">Confirme a Senha</label>
          <input type="password" name="confirmaSenha" [(ngModel)]="confirmaSenha" required
                 class="w-full border rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-pink-400"
                 placeholder="Repita sua senha">
        </div>

        <!-- Termo de Aceite LGPD -->
        <div class="flex items-start gap-2 mt-4">
          <input type="checkbox" id="aceiteLGPD" name="aceiteLGPD" [(ngModel)]="aceiteLGPD" required>
          <label for="aceiteLGPD" class="text-gray-700 text-sm leading-snug">
            Li e aceito os 
            <button type="button" (click)="abrirTermos()" class="text-pink-600 underline hover:text-pink-700">
              Termos de Uso e Política de Privacidade (LGPD)
            </button>.
          </label>
        </div>

        <!-- Mensagem de erro -->
        <p *ngIf="mensagemErro" class="text-red-500 text-sm mt-1">{{ mensagemErro }}</p>

        <!-- Botão enviar -->
        <button type="submit"
                class="w-full bg-pink-500 text-white py-3 px-6 rounded-lg hover:bg-pink-600 font-semibold transition-all duration-300">
          Cadastrar
        </button>
      </form>
    </div>
  </div>
</section>

<!-- Pop-up de sucesso -->
<div *ngIf="mensagemSucesso" 
     class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
  <div class="bg-white rounded-xl p-8 shadow-lg text-center max-w-sm animate-fadeIn">
    <p class="text-green-600 font-semibold text-lg">{{ mensagemSucesso }}</p>
  </div>
</div>

<!-- ✅ Modal de Termos e LGPD -->
<div *ngIf="mostrarTermos" (click)="fecharTermos()"
     class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 px-4">
  <div (click)="$event.stopPropagation()" class="bg-white max-w-2xl rounded-xl shadow-lg p-8 overflow-y-auto max-h-[80vh] animate-fadeIn">
    <h2 class="text-2xl font-bold text-pink-600 mb-4 text-center">Termos de Uso e Política de Privacidade (LGPD)</h2>

    <div class="text-gray-700 text-sm space-y-3">
      <p>Ao utilizar a plataforma MagicBaby, você concorda com os seguintes Termos de Uso e com a Política de Privacidade conforme a Lei nº 13.709/2018 (Lei Geral de Proteção de Dados - LGPD).</p>

      <h3 class="font-semibold text-pink-500">1. Coleta de Dados</h3>
      <p>Coletamos apenas os dados necessários para o funcionamento adequado da plataforma, como nome, e-mail e preferências de navegação, sempre mediante o seu consentimento.</p>

      <h3 class="font-semibold text-pink-500">2. Uso das Informações</h3>
      <p>Os dados informados são utilizados exclusivamente para criar sua conta, melhorar sua experiência e personalizar recomendações dentro da plataforma.</p>

      <h3 class="font-semibold text-pink-500">3. Compartilhamento de Dados</h3>
      <p>Seus dados não são vendidos nem compartilhados com terceiros, exceto quando exigido por lei ou mediante autorização expressa do titular.</p>

      <h3 class="font-semibold text-pink-500">4. Direitos do Usuário</h3>
      <p>Você tem o direito de acessar, corrigir, excluir ou solicitar cópia de seus dados pessoais a qualquer momento através dos canais de atendimento da plataforma.</p>

      <h3 class="font-semibold text-pink-500">5. Segurança</h3>
      <p>Adotamos medidas técnicas e administrativas para garantir a proteção de seus dados contra acessos não autorizados, perda ou alteração indevida.</p>

      <h3 class="font-semibold text-pink-500">6. Consentimento</h3>
      <p>Ao marcar o campo de aceite e prosseguir com o cadastro, você confirma que leu e concorda com todos os termos e políticas aqui apresentados.</p>
    </div>

    <div class="text-center mt-6">
      <button (click)="fecharTermos()"
              class="bg-pink-500 text-white px-6 py-2 rounded-lg hover:bg-pink-600 transition">
        Fechar
      </button>
    </div>
  </div>
</div>
